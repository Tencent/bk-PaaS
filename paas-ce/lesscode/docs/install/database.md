# 蓝鲸智云PaaS平台社区版之可视化开发平台

## 数据库部署说明

本地开发和生产环境数据库部署流程是一样的，都需要自己执行SQL对数据库进行修改。执行 SQL 分两种，安装时执行的 SQL 和升级时执行的 SQL。SQL 文件存放于 `lesscode/lib/server/model/sql` 文件夹下。

## 数据库部署流程（安装）

在 `lesscode/lib/server/model/sql` 文件夹下，每次发版都会新建一个文件夹，以发布日期命名，里面的 `initial.sql` 为安装该版本需要的所有 SQL，包含了建表语句和初始化数据。初次安装的时候，需要手动执行该SQL，即完成了初始化数据库部署。注意：如果不是初始化数据库部署，执行该 SQL，会导致数据丢失。如果是升级，请按照升级的数据库部署流程来操作。

## 数据库部署流程（升级）

在 `lesscode/lib/server/model/sql` 文件夹下，每次发布还会生成 `update.sql`，`update.sql` 是从上一个版本升级到这个版本 SQL 语句，包含了修改表结构的语句和初始化数据。如果这次升级数据库，跨越了3个版本，那么这3个版本的 `update.sql` 需要按照版本顺序都执行一次，即完成了升级数据库的流程。
